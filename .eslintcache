[{"D:\\Portfolio\\grup5\\tugas_akhir\\FrontEnd-AKEI\\src\\index.js":"1","D:\\Portfolio\\grup5\\tugas_akhir\\FrontEnd-AKEI\\src\\pages\\detail_product\\DetailProduct.jsx":"2","D:\\Portfolio\\grup5\\tugas_akhir\\FrontEnd-AKEI\\src\\pages\\cart\\Cart.jsx":"3","D:\\Portfolio\\grup5\\tugas_akhir\\FrontEnd-AKEI\\src\\pages\\user_profile\\UserProfile.jsx":"4","D:\\Portfolio\\grup5\\tugas_akhir\\FrontEnd-AKEI\\src\\pages\\auth\\login\\Login.jsx":"5","D:\\Portfolio\\grup5\\tugas_akhir\\FrontEnd-AKEI\\src\\redux\\reducers\\AuthReducers.js":"6","D:\\Portfolio\\grup5\\tugas_akhir\\FrontEnd-AKEI\\src\\pages\\verified\\Verified.jsx":"7","D:\\Portfolio\\grup5\\tugas_akhir\\FrontEnd-AKEI\\src\\pages\\Testing.jsx":"8","D:\\Portfolio\\grup5\\tugas_akhir\\FrontEnd-AKEI\\src\\helpers\\creditValidation.jsx":"9","D:\\Portfolio\\grup5\\tugas_akhir\\FrontEnd-AKEI\\src\\component\\header\\Header.jsx":"10"},{"size":962,"mtime":1606744015518,"results":"11","hashOfConfig":"12"},{"size":3953,"mtime":1607144803068,"results":"13","hashOfConfig":"12"},{"size":14149,"mtime":1607146782812,"results":"14","hashOfConfig":"12"},{"size":2919,"mtime":1607061933500,"results":"15","hashOfConfig":"12"},{"size":8812,"mtime":1607146782808,"results":"16","hashOfConfig":"12"},{"size":861,"mtime":1607146782848,"results":"17","hashOfConfig":"12"},{"size":1798,"mtime":1606744015527,"results":"18","hashOfConfig":"12"},{"size":1931,"mtime":1606739725394,"results":"19","hashOfConfig":"12"},{"size":547,"mtime":1607146782797,"results":"20","hashOfConfig":"12"},{"size":3760,"mtime":1607147594465,"results":"21","hashOfConfig":"12"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},"13fy07x",{"filePath":"25","messages":"26","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"27","messages":"28","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"29"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"32","messages":"33","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"34","messages":"35","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"40","messages":"41","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"42","messages":"43","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"D:\\Portfolio\\grup5\\tugas_akhir\\FrontEnd-AKEI\\src\\index.js",[],["44","45"],"D:\\Portfolio\\grup5\\tugas_akhir\\FrontEnd-AKEI\\src\\pages\\detail_product\\DetailProduct.jsx",["46"],"D:\\Portfolio\\grup5\\tugas_akhir\\FrontEnd-AKEI\\src\\pages\\cart\\Cart.jsx",["47","48","49"],"import React, { useEffect, useRef, useState } from 'react';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\r\nimport {Modal, ModalHeader, ModalBody, ModalFooter, CustomInput} from 'reactstrap'\r\nimport Header from './../../component/header/Header'\r\nimport './style.css'\r\nimport {priceFormatter, API_URL_SQL, credit} from './../../helpers'\r\nimport Axios from 'axios'\r\nimport {connect} from 'react-redux'\r\nimport Swal from 'sweetalert2'\r\nimport {findNearest} from 'geolib'\r\n\r\n\r\n//testing\r\nimport testImg from './../../assets/mainregimg.jpg'\r\n\r\nconst StyledTableCell = withStyles((theme) => ({\r\n    head: {\r\n      backgroundColor: theme.palette.common.white,\r\n      color: theme.palette.common.black,\r\n    },\r\n  }))(TableCell);\r\n\r\nconst useStyles = makeStyles({\r\n    table: {\r\n      backgroundColor: 'white',\r\n      color: 'white'\r\n    },\r\n  });\r\n\r\nconst Cart = (props) => {\r\n    const isCancelled = useRef(false)\r\n    const classes = useStyles();\r\n    const [dataCart, setdataCart] = useState([])\r\n    const [payModal, setpayModal] = useState(false)\r\n    const [choiceMethod, setchoiceMethod] = useState(0)\r\n    const ccPay = useRef()\r\n    const [invoicePhoto, setinvoicePhoto] = useState(null)\r\n\r\n    const [dataLocation, setdataLocation] = useState([])\r\n    const [matchLoc, setmatchLoc] = useState({})\r\n    const [longlat, setlonglat] = useState('')\r\n    const [curloc, setcurloc] = useState(false)\r\n    const [inputloc, setinputloc] = useState(false)\r\n    const addressUser = useRef()\r\n\r\n    useEffect(()=> {\r\n        getCartData()\r\n\r\n        return ()=> {\r\n            isCancelled.current = true\r\n        }\r\n    },[])\r\n\r\n    const getCartData = async () => {\r\n        try {\r\n            const {data} = await Axios.get(`${API_URL_SQL}/cart/getCart/${props.Auth.user_id}`)\r\n            if(!isCancelled.current) {\r\n                setdataCart(data.cartData)\r\n                setdataLocation(data.locationData)\r\n                console.log(data.locationData);\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n    \r\n    //show current location start\r\n    const geoLocation = () => {\r\n        if(navigator.geolocation) {\r\n            navigator.geolocation.getCurrentPosition(showPosition)\r\n        } else {\r\n            alert('Geolocation is not supported by this browser.')\r\n        }\r\n    }\r\n    \r\n    const showPosition = (position) => {\r\n        let latitude = position.coords.latitude\r\n        let longitude = position.coords.longitude\r\n        setlonglat(`${latitude}` + `,${longitude}`)\r\n\r\n        const nearDist = findNearest({ latitude: latitude, longitude: longitude }, dataLocation);\r\n        setmatchLoc(nearDist)\r\n        console.log(nearDist);\r\n    }\r\n    //show current location end\r\n\r\n    //address from user input start\r\n    \r\n\r\n    //address from user input end\r\n\r\n    const plusBtn = (ind) => {\r\n        const plusVar = [...dataCart]\r\n        plusVar[ind].quantity += 1\r\n        setdataCart(plusVar)\r\n\r\n        Axios.post(`${API_URL_SQL}/cart/updateCart`,plusVar[ind])\r\n        .then((res)=> {\r\n            console.log(res.data);\r\n        }).catch(err=> {\r\n            console.log(err.response.data.message);\r\n        })\r\n    }\r\n\r\n    const minBtn = (ind) => {\r\n        const minVar = [...dataCart]\r\n        minVar[ind].quantity -= 1\r\n        setdataCart(minVar)\r\n\r\n        if(minVar[ind].quantity < 1) {\r\n            let idData = {\r\n                idtrans: minVar[ind].idtrans,\r\n                idprod: minVar[ind].idprod,\r\n            }\r\n            minVar.splice(ind, 1)\r\n\r\n            Axios.post(`${API_URL_SQL}/cart/deleteCart`,idData)\r\n            .then((res)=> {\r\n                console.log(res.data);\r\n            }).catch(err=> {\r\n                console.log(err.response.data.message);\r\n            })\r\n        } else {\r\n            Axios.post(`${API_URL_SQL}/cart/updateCart`,minVar[ind])\r\n            .then((res)=> {\r\n                console.log(res.data);\r\n            }).catch(err=> {\r\n                console.log(err.response.data.message);\r\n            })\r\n        }\r\n    }\r\n\r\n    const renderTotalPrice = () => {\r\n        var total = dataCart.reduce((total, num)=> {\r\n            return total + (num.price * num.quantity)\r\n        }, 0)\r\n        return total\r\n    }\r\n\r\n    const oninputFileChange = (e) => {\r\n        if(e.target.files[0]) {\r\n            setinvoicePhoto(e.target.files[0])\r\n        } else {\r\n            setinvoicePhoto(null)\r\n        }\r\n      }\r\n\r\n    const onPayClick=()=>{\r\n        if(choiceMethod === '1') {\r\n            onPaywithInvoicePhoto()\r\n        } else if(choiceMethod === '2') {\r\n            if(credit(parseInt(ccPay.current.value))){\r\n                onPaywithCreditCard()\r\n            } else {\r\n                Swal.fire({\r\n                    icon: 'error',\r\n                    title: 'Oops...',\r\n                    text: 'Your credit card is not valid!',\r\n                  })\r\n            }\r\n        } else {\r\n            Swal.fire(\r\n                'Payment Methode?',\r\n                'Choose your payment methode first!',\r\n                'question'\r\n              )\r\n        }\r\n    }\r\n\r\n    const onPaywithInvoicePhoto = () => {\r\n        console.log('onPaywithInvoicePhoto');\r\n    }\r\n\r\n    const onPaywithCreditCard = () => {\r\n        console.log(dataCart[0].idtrans);\r\n        console.log(ccPay.current.value);\r\n        console.log(longlat);\r\n        console.log(matchLoc);\r\n\r\n        Axios.post(`${API_URL_SQL}/transaction/onpaycc`,{\r\n            user_id: props.Auth.user_id,\r\n            idtrans: dataCart[0].idtrans,\r\n            payment_proof: ccPay.current.value,\r\n            notes: longlat,\r\n            matchLoc: matchLoc\r\n        }).then((res)=> {\r\n            if(res.data === 'berhasil') {\r\n                setdataCart([])\r\n                Swal.fire({\r\n                    position: 'center-start',\r\n                    icon: 'success',\r\n                    title: 'Thank you for buying with AKEI!',\r\n                    showConfirmButton: false,\r\n                    timer: 1500\r\n                  })\r\n                setpayModal(false)\r\n            }\r\n        }).catch((err)=> {\r\n            console.log(err.response.data.message);\r\n        })\r\n    }\r\n\r\n    const renderCart = () => {\r\n        return dataCart.map((val, ind)=> {\r\n            return (\r\n                <TableRow key={ind+1}>\r\n                    <TableCell style={{width: '100px'}}>\r\n                        <div className='cartimg'>\r\n                            <img style={{objectFit: 'contain', objectPosition: '50% 50%'}} width='100%' height='100%' src={API_URL_SQL + val.image} alt={val.product_name} />\r\n                        </div>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                        <div className='cart-words-prod'>\r\n                            {val.product_name}\r\n                        </div> \r\n                    </TableCell>\r\n                    <TableCell>\r\n                        <div className='cart-words'>\r\n                            {priceFormatter(val.price)}\r\n                        </div>\r\n                        </TableCell>\r\n                    <TableCell>\r\n                        <div className='d-flex'>\r\n                            <button className='qty-button-minus' onClick={()=>minBtn(ind)}>-</button>\r\n                            <div className='qty-area'>\r\n                                {val.quantity}\r\n                            </div>\r\n                            <button className='qty-button-plus' onClick={()=>plusBtn(ind)}>+</button>\r\n                        </div>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                        <div className='cart-words'>\r\n                            {priceFormatter(val.price*val.quantity)}\r\n                        </div>\r\n                    </TableCell>\r\n                </TableRow>            \r\n            )\r\n        })\r\n    }\r\n\r\n    const curlocationChange = () => {\r\n        setcurloc(true)\r\n        setinputloc(false)\r\n        geoLocation()\r\n    }\r\n\r\n    const inputlocationChange = () => {\r\n        setinputloc(true)\r\n        setcurloc(false)\r\n    }\r\n\r\n    const toggle = () => {\r\n        setpayModal(!payModal)\r\n        setinvoicePhoto(null)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Modal style={{marginTop:80}} isOpen={payModal} toggle={toggle}>\r\n                <ModalHeader toggle={toggle}>Payment</ModalHeader>\r\n                <ModalBody>\r\n                    <select onChange={(e)=> setchoiceMethod(e.target.value)} className='form-control' defaultValue={0} >\r\n                        <option value=\"0\" hidden>Choose your payment method</option>\r\n                        <option value=\"1\">Invoice Proof</option>\r\n                        <option value=\"2\">Credit Card</option>\r\n                    </select>\r\n                    {\r\n                       choiceMethod === '2'?\r\n                        <input type='number' className='form-control my-2' ref={ccPay} placeholder='input your credit card'/>\r\n                        :\r\n                       choiceMethod === '1'?\r\n                       <div>\r\n                           <CustomInput className='form-control my-2' onChange={oninputFileChange} type='file' label={invoicePhoto ? invoicePhoto.name : 'select invoice'} />\r\n                           {\r\n                               invoicePhoto?\r\n                               <div className='mt-2'>\r\n                                   <img src={URL.createObjectURL(invoicePhoto)} \r\n                                   height = '200' \r\n                                   width = '200' \r\n                                   alt = \"invoice\"/>\r\n                               </div>\r\n                               :\r\n                               null\r\n                           }\r\n                       </div>\r\n                        :\r\n                        null\r\n                    }\r\n                </ModalBody>\r\n                <ModalFooter>\r\n                    <button onClick={onPayClick} className='checkout-button'>\r\n                        Bayar\r\n                    </button>\r\n                </ModalFooter>\r\n            </Modal>\r\n\r\n            <Header style={{backgroundColor: '#72ceb8'}}/>\r\n            <div style={{marginTop: '80px', marginInline: '50px'}} >\r\n                <div className='cartsection'>\r\n                    <div className='cart-left-side'>\r\n                        <Paper elevation={0}>\r\n                            <TableContainer>\r\n                                <Table stickyHeader className={classes.table}>\r\n                                    <TableHead>\r\n                                        <TableRow>\r\n                                            <StyledTableCell colSpan='2'>Product</StyledTableCell>\r\n                                            <StyledTableCell>Price</StyledTableCell>\r\n                                            <StyledTableCell>Quantity</StyledTableCell>\r\n                                            <StyledTableCell>Total</StyledTableCell>\r\n                                        </TableRow>\r\n                                    </TableHead>\r\n                                    <TableBody>\r\n                                        {renderCart()}\r\n                                    </TableBody>\r\n                                </Table>\r\n                            </TableContainer>\r\n                        </Paper>\r\n                    </div>\r\n                    <div className='cart-right-side'>\r\n                        <div className='cart-right-side-section'>\r\n                            <div className='right-top-side'>\r\n                                <div style={{padding: '10px'}}>\r\n                                    <h4>Order Summary</h4>\r\n                                    <p style={{color: 'gray'}}>lorem ipsum</p>\r\n                                </div>\r\n                            </div>\r\n                            <div className='right-bottom-side'>\r\n                                <div className='checkout-side'>\r\n                                    <div>\r\n                                        <div style={{color: 'gray'}}>Total Price</div>\r\n                                        <div>{priceFormatter(renderTotalPrice())}</div>\r\n                                    </div>\r\n                                    <button onClick={()=> setpayModal(true)} className='checkout-button'>Checkout</button>\r\n                                </div>\r\n                            </div>\r\n                            {\r\n                                dataCart.length?\r\n                                <>\r\n                                    <div className='d-flex justify-content-center align-items-center'>\r\n                                        <h5 className='mb-2 mt-5'>Choose Payment Address</h5>\r\n                                    </div>\r\n                                    <div onClick={curlocationChange} className={curloc?'location-change':'current-location'}>\r\n                                        Using current location\r\n                                    </div>\r\n                                    <div className={inputloc?'location-change':'input-location'}>\r\n                                        <input onClick={inputlocationChange} ref={addressUser} type=\"text\" placeholder='input your address'/>\r\n                                    </div>\r\n                                </>\r\n                                :\r\n                                null\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nconst Mapstatetoprops = (state) => {\r\n    return {\r\n        Auth: state.Auth\r\n    }\r\n}\r\n\r\nexport default connect(Mapstatetoprops)(Cart)","D:\\Portfolio\\grup5\\tugas_akhir\\FrontEnd-AKEI\\src\\pages\\user_profile\\UserProfile.jsx",[],"D:\\Portfolio\\grup5\\tugas_akhir\\FrontEnd-AKEI\\src\\pages\\auth\\login\\Login.jsx",["50"],"D:\\Portfolio\\grup5\\tugas_akhir\\FrontEnd-AKEI\\src\\redux\\reducers\\AuthReducers.js",["51"],"D:\\Portfolio\\grup5\\tugas_akhir\\FrontEnd-AKEI\\src\\pages\\verified\\Verified.jsx",[],"D:\\Portfolio\\grup5\\tugas_akhir\\FrontEnd-AKEI\\src\\pages\\Testing.jsx",[],"D:\\Portfolio\\grup5\\tugas_akhir\\FrontEnd-AKEI\\src\\helpers\\creditValidation.jsx",["52","53"],"D:\\Portfolio\\grup5\\tugas_akhir\\FrontEnd-AKEI\\src\\component\\header\\Header.jsx",["54","55","56"],{"ruleId":"57","replacedBy":"58"},{"ruleId":"59","replacedBy":"60"},{"ruleId":"61","severity":1,"message":"62","line":31,"column":7,"nodeType":"63","endLine":31,"endColumn":9,"suggestions":"64"},{"ruleId":"65","severity":1,"message":"66","line":21,"column":8,"nodeType":"67","messageId":"68","endLine":21,"endColumn":15},{"ruleId":"61","severity":1,"message":"69","line":59,"column":7,"nodeType":"63","endLine":59,"endColumn":9,"suggestions":"70"},{"ruleId":"71","severity":1,"message":"72","line":86,"column":34,"nodeType":"73","messageId":"74","endLine":86,"endColumn":35},{"ruleId":"65","severity":1,"message":"75","line":99,"column":17,"nodeType":"67","messageId":"68","endLine":99,"endColumn":22},{"ruleId":"76","severity":1,"message":"77","line":13,"column":1,"nodeType":"78","endLine":30,"endColumn":2},{"ruleId":"79","severity":1,"message":"80","line":10,"column":19,"nodeType":"73","messageId":"81","endLine":10,"endColumn":21},{"ruleId":"79","severity":1,"message":"80","line":24,"column":18,"nodeType":"73","messageId":"81","endLine":24,"endColumn":20},{"ruleId":"65","severity":1,"message":"82","line":1,"column":17,"nodeType":"67","messageId":"68","endLine":1,"endColumn":26},{"ruleId":"65","severity":1,"message":"83","line":1,"column":49,"nodeType":"67","messageId":"68","endLine":1,"endColumn":55},{"ruleId":"65","severity":1,"message":"84","line":30,"column":11,"nodeType":"67","messageId":"68","endLine":30,"endColumn":20},"no-native-reassign",["85"],"no-negated-in-lhs",["86"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'id'. Either include it or remove the dependency array.","ArrayExpression",["87"],"no-unused-vars","'testImg' is defined but never used.","Identifier","unusedVar","React Hook useEffect has a missing dependency: 'getCartData'. Either include it or remove the dependency array.",["88"],"no-useless-concat","Unexpected string concatenation of literals.","BinaryExpression","unexpectedConcat","'token' is assigned a value but never used.","import/no-anonymous-default-export","Assign arrow function to a variable before exporting as module default","ExportDefaultDeclaration","eqeqeq","Expected '===' and instead saw '=='.","unexpected","'Component' is defined but never used.","'useRef' is defined but never used.","'toSection' is assigned a value but never used.","no-global-assign","no-unsafe-negation",{"desc":"89","fix":"90"},{"desc":"91","fix":"92"},"Update the dependencies array to be: [id]",{"range":"93","text":"94"},"Update the dependencies array to be: [getCartData]",{"range":"95","text":"96"},[914,916],"[id]",[2005,2007],"[getCartData]"]